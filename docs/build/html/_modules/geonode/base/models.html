

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>geonode.base.models &mdash; GeoNode Cloud Core 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            GeoNode Cloud Core
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenido</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">GeoNode Cloud Core</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../geonode.html">geonode</a></li>
          <li class="breadcrumb-item"><a href="../base.html">geonode.base</a></li>
      <li class="breadcrumb-item active">geonode.base.models</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for geonode.base.models</h1><div class="highlight"><pre>
<span></span><span class="c1">#########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2016 OSGeo</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">#########################################################################</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">html</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">sequences.models</span> <span class="kn">import</span> <span class="n">Sequence</span>

<span class="kn">from</span> <span class="nn">sequences</span> <span class="kn">import</span> <span class="n">get_next_value</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">transaction</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Max</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">escape</span>
<span class="kn">from</span> <span class="nn">django.utils.timezone</span> <span class="kn">import</span> <span class="n">now</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Q</span><span class="p">,</span> <span class="n">signals</span>
<span class="kn">from</span> <span class="nn">django.db.utils</span> <span class="kn">import</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">OperationalError</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">Group</span>
<span class="kn">from</span> <span class="nn">django.core.files.base</span> <span class="kn">import</span> <span class="n">ContentFile</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">django.db.models.query</span> <span class="kn">import</span> <span class="n">QuerySet</span>
<span class="kn">from</span> <span class="nn">django.db.models.fields.json</span> <span class="kn">import</span> <span class="n">JSONField</span>
<span class="kn">from</span> <span class="nn">django.utils.functional</span> <span class="kn">import</span> <span class="n">cached_property</span><span class="p">,</span> <span class="n">classproperty</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.geos</span> <span class="kn">import</span> <span class="n">GEOSGeometry</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">,</span> <span class="n">Point</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.db.models</span> <span class="kn">import</span> <span class="n">PolygonField</span>
<span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.models</span> <span class="kn">import</span> <span class="n">ContentType</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">strip_tags</span>
<span class="kn">from</span> <span class="nn">mptt.models</span> <span class="kn">import</span> <span class="n">MPTTModel</span><span class="p">,</span> <span class="n">TreeForeignKey</span>

<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageOps</span>

<span class="kn">from</span> <span class="nn">polymorphic.models</span> <span class="kn">import</span> <span class="n">PolymorphicModel</span>
<span class="kn">from</span> <span class="nn">polymorphic.managers</span> <span class="kn">import</span> <span class="n">PolymorphicManager</span>
<span class="kn">from</span> <span class="nn">pinax.ratings.models</span> <span class="kn">import</span> <span class="n">OverallRating</span>

<span class="kn">from</span> <span class="nn">taggit.models</span> <span class="kn">import</span> <span class="n">TagBase</span><span class="p">,</span> <span class="n">ItemBase</span>
<span class="kn">from</span> <span class="nn">taggit.managers</span> <span class="kn">import</span> <span class="n">TaggableManager</span><span class="p">,</span> <span class="n">_TaggableManager</span>

<span class="kn">from</span> <span class="nn">guardian.shortcuts</span> <span class="kn">import</span> <span class="n">get_anonymous_user</span><span class="p">,</span> <span class="n">get_objects_for_user</span>
<span class="kn">from</span> <span class="nn">treebeard.mp_tree</span> <span class="kn">import</span> <span class="n">MP_Node</span><span class="p">,</span> <span class="n">MP_NodeQuerySet</span><span class="p">,</span> <span class="n">MP_NodeManager</span>
<span class="kn">from</span> <span class="nn">geonode</span> <span class="kn">import</span> <span class="n">GeoNodeException</span>

<span class="kn">from</span> <span class="nn">geonode.base</span> <span class="kn">import</span> <span class="n">enumerations</span>
<span class="kn">from</span> <span class="nn">geonode.singleton</span> <span class="kn">import</span> <span class="n">SingletonModel</span>
<span class="kn">from</span> <span class="nn">geonode.groups.conf</span> <span class="kn">import</span> <span class="n">settings</span> <span class="k">as</span> <span class="n">groups_settings</span>
<span class="kn">from</span> <span class="nn">geonode.base.bbox_utils</span> <span class="kn">import</span> <span class="n">BBOXHelper</span><span class="p">,</span> <span class="n">polygon_from_bbox</span>
<span class="kn">from</span> <span class="nn">geonode.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">bbox_to_wkt</span><span class="p">,</span>
    <span class="n">find_by_attr</span><span class="p">,</span>
    <span class="n">bbox_to_projection</span><span class="p">,</span>
    <span class="n">bbox_swap</span><span class="p">,</span>
    <span class="n">get_allowed_extensions</span><span class="p">,</span>
    <span class="n">is_monochromatic_image</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">geonode.thumbs.utils</span> <span class="kn">import</span> <span class="n">thumb_size</span><span class="p">,</span> <span class="n">remove_thumbs</span><span class="p">,</span> <span class="n">get_unique_upload_path</span>
<span class="kn">from</span> <span class="nn">geonode.groups.models</span> <span class="kn">import</span> <span class="n">GroupProfile</span>
<span class="kn">from</span> <span class="nn">geonode.security.utils</span> <span class="kn">import</span> <span class="n">get_visible_resources</span><span class="p">,</span> <span class="n">get_geoapp_subtypes</span>
<span class="kn">from</span> <span class="nn">geonode.security.models</span> <span class="kn">import</span> <span class="n">PermissionLevelMixin</span>
<span class="kn">from</span> <span class="nn">geonode.security.permissions</span> <span class="kn">import</span> <span class="n">VIEW_PERMISSIONS</span><span class="p">,</span> <span class="n">OWNER_PERMISSIONS</span>

<span class="kn">from</span> <span class="nn">geonode.notifications_helper</span> <span class="kn">import</span> <span class="n">send_notification</span><span class="p">,</span> <span class="n">get_notification_recipients</span>
<span class="kn">from</span> <span class="nn">geonode.people</span> <span class="kn">import</span> <span class="n">Roles</span>
<span class="kn">from</span> <span class="nn">geonode.people.enumerations</span> <span class="kn">import</span> <span class="n">ROLE_VALUES</span>

<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlsplit</span><span class="p">,</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">geonode.storage.manager</span> <span class="kn">import</span> <span class="n">storage_manager</span>


<div class="viewcode-block" id="logger">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.logger">[docs]</a>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span></div>



<div class="viewcode-block" id="ContactRole">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole">[docs]</a>
<span class="k">class</span> <span class="nc">ContactRole</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ContactRole is an intermediate model to bind Profiles as Contacts to Resources and apply roles.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ContactRole.resource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole.resource">[docs]</a>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;ResourceBase&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="ContactRole.contact">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole.contact">[docs]</a>
    <span class="n">contact</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="ContactRole.role">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole.role">[docs]</a>
    <span class="n">role</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">ROLE_VALUES</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;function performed by the responsible &quot;</span> <span class="s2">&quot;party&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ContactRole.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="ContactRole.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ContactRole.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;contact&quot;</span><span class="p">,</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">),)</span></div>
</div>
</div>



<div class="viewcode-block" id="TopicCategory">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory">[docs]</a>
<span class="k">class</span> <span class="nc">TopicCategory</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Metadata about high-level geographic data thematic classification.</span>
<span class="sd">    It should reflect a list of codes from TC211</span>
<span class="sd">    See: http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml</span>
<span class="sd">    &lt;CodeListDictionary gml:id=&quot;MD_MD_TopicCategoryCode&quot;&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TopicCategory.identifier">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.identifier">[docs]</a>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;location&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TopicCategory.description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.description">[docs]</a>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TopicCategory.gn_description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.gn_description">[docs]</a>
    <span class="n">gn_description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="s2">&quot;GeoNode description&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="TopicCategory.is_choice">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.is_choice">[docs]</a>
    <span class="n">is_choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="TopicCategory.fa_class">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.fa_class">[docs]</a>
    <span class="n">fa_class</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;fa-times&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="TopicCategory.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gn_description</span></div>


<div class="viewcode-block" id="TopicCategory.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="TopicCategory.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="TopicCategory.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TopicCategory.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Metadata Topic Categories&quot;</span></div>
</div>
</div>



<div class="viewcode-block" id="SpatialRepresentationType">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType">[docs]</a>
<span class="k">class</span> <span class="nc">SpatialRepresentationType</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Metadata information about the spatial representation type.</span>
<span class="sd">    It should reflect a list of codes from TC211</span>
<span class="sd">    See: http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml</span>
<span class="sd">    &lt;CodeListDictionary gml:id=&quot;MD_SpatialRepresentationTypeCode&quot;&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SpatialRepresentationType.identifier">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.identifier">[docs]</a>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SpatialRepresentationType.description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.description">[docs]</a>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SpatialRepresentationType.gn_description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.gn_description">[docs]</a>
    <span class="n">gn_description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="s2">&quot;GeoNode description&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>

<div class="viewcode-block" id="SpatialRepresentationType.is_choice">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.is_choice">[docs]</a>
    <span class="n">is_choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="SpatialRepresentationType.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gn_description</span><span class="p">)</span></div>


<div class="viewcode-block" id="SpatialRepresentationType.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="SpatialRepresentationType.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="SpatialRepresentationType.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.SpatialRepresentationType.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Metadata Spatial Representation Types&quot;</span></div>
</div>
</div>



<div class="viewcode-block" id="Region">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region">[docs]</a>
<span class="k">class</span> <span class="nc">Region</span><span class="p">(</span><span class="n">MPTTModel</span><span class="p">):</span>
<div class="viewcode-block" id="Region.code">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.code">[docs]</a>
    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.name">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.name">[docs]</a>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.parent">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.parent">[docs]</a>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">TreeForeignKey</span><span class="p">(</span><span class="s2">&quot;self&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;children&quot;</span><span class="p">)</span></div>


    <span class="c1"># Save bbox values in the database.</span>
    <span class="c1"># This is useful for spatial searches and for generating thumbnail images</span>
    <span class="c1"># and metadata records.</span>
<div class="viewcode-block" id="Region.bbox_x0">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox_x0">[docs]</a>
    <span class="n">bbox_x0</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.bbox_x1">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox_x1">[docs]</a>
    <span class="n">bbox_x1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.bbox_y0">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox_y0">[docs]</a>
    <span class="n">bbox_y0</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.bbox_y1">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox_y1">[docs]</a>
    <span class="n">bbox_y1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Region.srid">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.srid">[docs]</a>
    <span class="n">srid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Region.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="Region.bbox">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format: [x0,x1,y0,y1].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_x0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">srid</span><span class="p">]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="Region.bbox_string">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.bbox_string">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format: [x0,y0,x1,y1].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_x0</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_y0</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_x1</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_y1</span><span class="p">)])</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="Region.geographic_bounding_box">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.geographic_bounding_box">[docs]</a>
    <span class="k">def</span> <span class="nf">geographic_bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format: [x0,x1,y0,y1].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">bbox_to_wkt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_x0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y1</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="Region.geom">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.geom">[docs]</a>
    <span class="k">def</span> <span class="nf">geom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">srid</span><span class="p">,</span> <span class="n">wkt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geographic_bounding_box</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">srid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">srid</span><span class="p">)</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">GEOSGeometry</span><span class="p">(</span><span class="n">wkt</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">srid</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">geom</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">geom</span></div>


<div class="viewcode-block" id="Region.is_assignable_to_geom">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.is_assignable_to_geom">[docs]</a>
    <span class="k">def</span> <span class="nf">is_assignable_to_geom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extent_geom</span><span class="p">:</span> <span class="n">GEOSGeometry</span><span class="p">):</span>
        <span class="n">region_geom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span>

        <span class="k">if</span> <span class="n">region_geom</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">extent_geom</span><span class="p">)</span> <span class="ow">or</span> <span class="n">region_geom</span><span class="o">.</span><span class="n">overlaps</span><span class="p">(</span><span class="n">extent_geom</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Region.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="Region.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Region.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Metadata Regions&quot;</span></div>
</div>


<div class="viewcode-block" id="Region.MPTTMeta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.MPTTMeta">[docs]</a>
    <span class="k">class</span> <span class="nc">MPTTMeta</span><span class="p">:</span>
<div class="viewcode-block" id="Region.MPTTMeta.order_insertion_by">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Region.MPTTMeta.order_insertion_by">[docs]</a>
        <span class="n">order_insertion_by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span></div>
</div>
</div>



<div class="viewcode-block" id="RestrictionCodeType">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType">[docs]</a>
<span class="k">class</span> <span class="nc">RestrictionCodeType</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Metadata information about the spatial representation type.</span>
<span class="sd">    It should reflect a list of codes from TC211</span>
<span class="sd">    See: http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml</span>
<span class="sd">    &lt;CodeListDictionary gml:id=&quot;MD_RestrictionCode&quot;&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="RestrictionCodeType.identifier">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.identifier">[docs]</a>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="RestrictionCodeType.description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.description">[docs]</a>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="RestrictionCodeType.gn_description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.gn_description">[docs]</a>
    <span class="n">gn_description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="s2">&quot;GeoNode description&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>

<div class="viewcode-block" id="RestrictionCodeType.is_choice">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.is_choice">[docs]</a>
    <span class="n">is_choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="RestrictionCodeType.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gn_description</span><span class="p">)</span></div>


<div class="viewcode-block" id="RestrictionCodeType.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="RestrictionCodeType.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="RestrictionCodeType.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.RestrictionCodeType.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Metadata Restriction Code Types&quot;</span></div>
</div>
</div>



<div class="viewcode-block" id="License">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License">[docs]</a>
<span class="k">class</span> <span class="nc">License</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="License.identifier">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.identifier">[docs]</a>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="License.name">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.name">[docs]</a>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>

<div class="viewcode-block" id="License.abbreviation">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.abbreviation">[docs]</a>
    <span class="n">abbreviation</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="License.description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.description">[docs]</a>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="License.url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.url">[docs]</a>
    <span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="License.license_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.license_text">[docs]</a>
    <span class="n">license_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="License.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="License.name_long">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.name_long">[docs]</a>
    <span class="k">def</span> <span class="nf">name_long</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">abbreviation</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abbreviation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">abbreviation</span><span class="si">}</span><span class="s2">)&quot;</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="License.description_bullets">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.description_bullets">[docs]</a>
    <span class="k">def</span> <span class="nf">description_bullets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bullets</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;+ </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bullets</span></div>


<div class="viewcode-block" id="License.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="License.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="License.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.License.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Licenses&quot;</span></div>
</div>
</div>



<div class="viewcode-block" id="HierarchicalKeywordQuerySet">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeywordQuerySet">[docs]</a>
<span class="k">class</span> <span class="nc">HierarchicalKeywordQuerySet</span><span class="p">(</span><span class="n">MP_NodeQuerySet</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;QuerySet to automatically create a root node if `depth` not given.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="HierarchicalKeywordQuerySet.create">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeywordQuerySet.create">[docs]</a>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;depth&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_root</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="HierarchicalKeywordManager">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeywordManager">[docs]</a>
<span class="k">class</span> <span class="nc">HierarchicalKeywordManager</span><span class="p">(</span><span class="n">MP_NodeManager</span><span class="p">):</span>
<div class="viewcode-block" id="HierarchicalKeywordManager.get_queryset">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeywordManager.get_queryset">[docs]</a>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HierarchicalKeywordQuerySet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="HierarchicalKeyword">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeyword">[docs]</a>
<span class="k">class</span> <span class="nc">HierarchicalKeyword</span><span class="p">(</span><span class="n">TagBase</span><span class="p">,</span> <span class="n">MP_Node</span><span class="p">):</span>
<div class="viewcode-block" id="HierarchicalKeyword.node_order_by">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeyword.node_order_by">[docs]</a>
    <span class="n">node_order_by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="HierarchicalKeyword.objects">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeyword.objects">[docs]</a>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">HierarchicalKeywordManager</span><span class="p">()</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="HierarchicalKeyword.resource_keywords_tree">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeyword.resource_keywords_tree">[docs]</a>
    <span class="k">def</span> <span class="nf">resource_keywords_tree</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns resource keywords tree as a dict object.&quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">get_anonymous_user</span><span class="p">()</span>
        <span class="n">resource_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">resource_type</span><span class="p">]</span> <span class="k">if</span> <span class="n">resource_type</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">get_geoapp_subtypes</span><span class="p">()</span>
        <span class="n">qset</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_tree</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">SKIP_PERMS_FILTER</span><span class="p">:</span>
            <span class="n">resources</span> <span class="o">=</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resources</span> <span class="o">=</span> <span class="n">get_objects_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;base.view_resourcebase&quot;</span><span class="p">)</span>

        <span class="n">resources</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">polymorphic_ctype__model__in</span><span class="o">=</span><span class="n">resource_types</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">resource_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">resources</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">resource_name</span><span class="p">)</span>

        <span class="n">resources</span> <span class="o">=</span> <span class="n">get_visible_resources</span><span class="p">(</span>
            <span class="n">resources</span><span class="p">,</span>
            <span class="n">user</span><span class="p">,</span>
            <span class="n">admin_approval_required</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">ADMIN_MODERATE_UPLOADS</span><span class="p">,</span>
            <span class="n">unpublished_not_visible</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">RESOURCE_PUBLISHING</span><span class="p">,</span>
            <span class="n">private_groups_not_visibile</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">GROUP_PRIVATE_RESOURCES</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">hkw</span> <span class="ow">in</span> <span class="n">qset</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="n">slug</span> <span class="o">=</span> <span class="n">hkw</span><span class="o">.</span><span class="n">slug</span>
            <span class="n">tags_count</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="n">tags_count</span> <span class="o">=</span> <span class="n">TaggedContentItem</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">content_object__in</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">hkw</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">tags_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">newobj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">hkw</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">hkw</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="n">slug</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">tags_count</span><span class="p">]}</span>
                <span class="n">depth</span> <span class="o">=</span> <span class="n">hkw</span><span class="o">.</span><span class="n">depth</span> <span class="ow">or</span> <span class="mi">1</span>

                <span class="c1"># No use case, so purpose of &#39;parent&#39; param is not clear.</span>
                <span class="c1"># So following first &#39;if&#39; statement is left unchanged</span>
                <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">parent</span> <span class="ow">and</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parent</span> <span class="ow">and</span> <span class="n">depth</span> <span class="o">==</span> <span class="n">parent</span><span class="o">.</span><span class="n">depth</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">hkw</span><span class="o">.</span><span class="n">pk</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree</span><span class="p">:</span>
                        <span class="n">tree</span><span class="p">[</span><span class="n">hkw</span><span class="o">.</span><span class="n">pk</span><span class="p">]</span> <span class="o">=</span> <span class="n">newobj</span>
                        <span class="n">tree</span><span class="p">[</span><span class="n">hkw</span><span class="o">.</span><span class="n">pk</span><span class="p">][</span><span class="s2">&quot;nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">tree</span><span class="p">[</span><span class="n">hkw</span><span class="o">.</span><span class="n">pk</span><span class="p">][</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tags_count</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tree</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_keywords_tree_of_a_child</span><span class="p">(</span><span class="n">hkw</span><span class="p">,</span> <span class="n">tree</span><span class="p">,</span> <span class="n">newobj</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="HierarchicalKeyword._keywords_tree_of_a_child">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.HierarchicalKeyword._keywords_tree_of_a_child">[docs]</a>
    <span class="k">def</span> <span class="nf">_keywords_tree_of_a_child</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">tree</span><span class="p">,</span> <span class="n">newobj</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_tree</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">get_root</span><span class="p">())</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">qs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree</span><span class="p">:</span>
            <span class="n">tree</span><span class="p">[</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">slug</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="p">[]}</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">tree</span><span class="p">[</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">qs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">is_descendant_of</span><span class="p">(</span><span class="n">kw</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">kw</span><span class="o">.</span><span class="n">depth</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">item_found</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">]:</span>
                        <span class="n">item_found</span> <span class="o">=</span> <span class="n">find_by_attr</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">],</span> <span class="n">kw</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">item_found</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">kw</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">kw</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="n">kw</span><span class="o">.</span><span class="n">slug</span><span class="p">,</span> <span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="p">[]})</span>
                        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">node</span> <span class="o">=</span> <span class="n">item_found</span>
                        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s2">&quot;nodes&quot;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># All leaves appended but a child which is not a leaf may not be added</span>
        <span class="c1"># again, as a leaf, but only its tag count be updated</span>
        <span class="n">item_found</span> <span class="o">=</span> <span class="n">find_by_attr</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">],</span> <span class="n">newobj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">item_found</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">item_found</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newobj</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;nodes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newobj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">tree</span></div>
</div>



<div class="viewcode-block" id="TaggedContentItem">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TaggedContentItem">[docs]</a>
<span class="k">class</span> <span class="nc">TaggedContentItem</span><span class="p">(</span><span class="n">ItemBase</span><span class="p">):</span>
<div class="viewcode-block" id="TaggedContentItem.content_object">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TaggedContentItem.content_object">[docs]</a>
    <span class="n">content_object</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;ResourceBase&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaggedContentItem.tag">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TaggedContentItem.tag">[docs]</a>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;HierarchicalKeyword&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;keywords&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>


    <span class="c1"># see https://github.com/alex/django-taggit/issues/101</span>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="TaggedContentItem.tags_for">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.TaggedContentItem.tags_for">[docs]</a>
    <span class="k">def</span> <span class="nf">tags_for</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_filters</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">extra_filters</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">tag_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag_relname</span><span class="p">()</span><span class="si">}</span><span class="s2">__content_object&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="p">},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">tag_model</span><span class="p">()</span>
            <span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">tag_relname</span><span class="p">()</span><span class="si">}</span><span class="s2">__content_object__isnull&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="o">.</span><span class="n">distinct</span><span class="p">()</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="_HierarchicalTagManager">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models._HierarchicalTagManager">[docs]</a>
<span class="k">class</span> <span class="nc">_HierarchicalTagManager</span><span class="p">(</span><span class="n">_TaggableManager</span><span class="p">):</span>
<div class="viewcode-block" id="_HierarchicalTagManager.add">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models._HierarchicalTagManager.add">[docs]</a>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">,</span> <span class="n">through_defaults</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tag_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tag_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tag_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">str_tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tags</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">tag_model</span><span class="p">())])</span>
        <span class="n">tag_objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span> <span class="o">-</span> <span class="n">str_tags</span>
        <span class="c1"># If str_tags has 0 elements Django actually optimizes that to not do a</span>
        <span class="c1"># query.  Malcolm is very smart.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">existing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">tag_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__in</span><span class="o">=</span><span class="n">str_tags</span><span class="p">,</span> <span class="o">**</span><span class="n">tag_kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">tag_objs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">existing</span><span class="p">)</span>
            <span class="n">new_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">_new_keywords</span> <span class="o">=</span> <span class="n">str_tags</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">existing</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">new_tag</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">_new_keywords</span><span class="p">):</span>
                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">escape</span><span class="p">(</span><span class="n">new_tag</span><span class="p">)</span>
                <span class="n">new_tag_obj</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">new_tag_obj</span> <span class="o">=</span> <span class="n">HierarchicalKeyword</span><span class="o">.</span><span class="n">add_root</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">new_tag</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="c1"># HierarchicalKeyword.add_root didn&#39;t return, probably the keyword already exists</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">new_tag_obj</span><span class="p">:</span>
                    <span class="n">new_tag_obj</span> <span class="o">=</span> <span class="n">HierarchicalKeyword</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">new_tag</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">new_tag_obj</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                        <span class="n">new_tag_obj</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">new_tag_obj</span><span class="p">:</span>
                    <span class="n">tag_objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_tag_obj</span><span class="p">)</span>
                    <span class="n">new_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_tag_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Something has gone seriously wrong and we cannot assign the tag to the resource</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error during the keyword creation for keyword: </span><span class="si">{</span><span class="n">new_tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">signals</span><span class="o">.</span><span class="n">m2m_changed</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;pre_add&quot;</span><span class="p">,</span>
                <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">,</span>
                <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">tag_model</span><span class="p">(),</span>
                <span class="n">pk_set</span><span class="o">=</span><span class="n">new_ids</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tag_objs</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_lookup_kwargs</span><span class="p">(),</span> <span class="n">defaults</span><span class="o">=</span><span class="n">through_defaults</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="n">signals</span><span class="o">.</span><span class="n">m2m_changed</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
                <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;post_add&quot;</span><span class="p">,</span>
                <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">,</span>
                <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">tag_model</span><span class="p">(),</span>
                <span class="n">pk_set</span><span class="o">=</span><span class="n">new_ids</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The keyword provided already exists&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">OperationalError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;An error has occured with the DB connection. Please try to re-add the keywords again&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span></div>
</div>



<div class="viewcode-block" id="Thesaurus">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus">[docs]</a>
<span class="k">class</span> <span class="nc">Thesaurus</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loadable thesaurus containing keywords in different languages</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Thesaurus.id">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.id">[docs]</a>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.identifier">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.identifier">[docs]</a>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="Thesaurus.title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.title">[docs]</a>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="Thesaurus.date">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.date">[docs]</a>
    <span class="n">date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="Thesaurus.description">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.description">[docs]</a>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.slug">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.slug">[docs]</a>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.about">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.about">[docs]</a>
    <span class="n">about</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.card_min">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.card_min">[docs]</a>
    <span class="n">card_min</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Thesaurus.card_max">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.card_max">[docs]</a>
    <span class="n">card_max</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Thesaurus.facet">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.facet">[docs]</a>
    <span class="n">facet</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Thesaurus.order">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.order">[docs]</a>
    <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span></div>


<div class="viewcode-block" id="Thesaurus.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="Thesaurus.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="Thesaurus.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Thesaurus.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Thesauri&quot;</span></div>
</div>
</div>



<div class="viewcode-block" id="ThesaurusKeywordLabel">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel">[docs]</a>
<span class="k">class</span> <span class="nc">ThesaurusKeywordLabel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loadable thesaurus containing keywords in different languages</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusKeywordLabel.lang">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.lang">[docs]</a>
    <span class="n">lang</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></div>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusKeywordLabel.label">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.label">[docs]</a>
    <span class="n">label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>

    <span class="c1"># note  = models.CharField(max_length=511)</span>

<div class="viewcode-block" id="ThesaurusKeywordLabel.keyword">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.keyword">[docs]</a>
    <span class="n">keyword</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;ThesaurusKeyword&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;keyword&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeywordLabel.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeywordLabel.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="ThesaurusKeywordLabel.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;keyword&quot;</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ThesaurusKeywordLabel.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Thesaurus Keyword Labels&quot;</span></div>

<div class="viewcode-block" id="ThesaurusKeywordLabel.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeywordLabel.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;keyword&quot;</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">),)</span></div>
</div>
</div>



<div class="viewcode-block" id="ThesaurusKeyword">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword">[docs]</a>
<span class="k">class</span> <span class="nc">ThesaurusKeyword</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loadable thesaurus containing keywords in different languages</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusKeyword.about">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.about">[docs]</a>
    <span class="n">about</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusKeyword.alt_label">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.alt_label">[docs]</a>
    <span class="n">alt_label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeyword.thesaurus">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.thesaurus">[docs]</a>
    <span class="n">thesaurus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;Thesaurus&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;thesaurus&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeyword.image">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.image">[docs]</a>
    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A URL to an image&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeyword.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt_label</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ThesaurusKeyword.labels">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.labels">[docs]</a>
    <span class="k">def</span> <span class="nf">labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ThesaurusKeywordLabel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">keyword</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusKeyword.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="ThesaurusKeyword.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;alt_label&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="ThesaurusKeyword.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Thesaurus Keywords&quot;</span></div>

<div class="viewcode-block" id="ThesaurusKeyword.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusKeyword.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;thesaurus&quot;</span><span class="p">,</span> <span class="s2">&quot;alt_label&quot;</span><span class="p">),)</span></div>
</div>
</div>



<div class="viewcode-block" id="generate_thesaurus_reference">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.generate_thesaurus_reference">[docs]</a>
<span class="k">def</span> <span class="nf">generate_thesaurus_reference</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">about</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="n">about</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">thesaurus</span><span class="o">.</span><span class="n">about</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">SITEURL</span><span class="si">}</span><span class="s2">/thesaurus/</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">thesaurus</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">suffix</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">alt_label</span> <span class="ow">or</span> <span class="n">instance</span><span class="o">.</span><span class="n">id</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">about</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">#</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="n">about</span></div>



<span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">generate_thesaurus_reference</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">ThesaurusKeyword</span><span class="p">)</span>


<div class="viewcode-block" id="ThesaurusLabel">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel">[docs]</a>
<span class="k">class</span> <span class="nc">ThesaurusLabel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Contains localized version of the thesaurus title</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusLabel.lang">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.lang">[docs]</a>
    <span class="n">lang</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></div>

    <span class="c1"># read from the RDF file</span>
<div class="viewcode-block" id="ThesaurusLabel.label">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.label">[docs]</a>
    <span class="n">label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusLabel.thesaurus">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.thesaurus">[docs]</a>
    <span class="n">thesaurus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;Thesaurus&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;rel_thesaurus&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusLabel.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span></div>


<div class="viewcode-block" id="ThesaurusLabel.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="ThesaurusLabel.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;lang&quot;</span><span class="p">,)</span></div>

<div class="viewcode-block" id="ThesaurusLabel.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Thesaurus Labels&quot;</span></div>

<div class="viewcode-block" id="ThesaurusLabel.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ThesaurusLabel.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;thesaurus&quot;</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">),)</span></div>
</div>
</div>



<div class="viewcode-block" id="ResourceBaseManager">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager">[docs]</a>
<span class="k">class</span> <span class="nc">ResourceBaseManager</span><span class="p">(</span><span class="n">PolymorphicManager</span><span class="p">):</span>
<div class="viewcode-block" id="ResourceBaseManager.admin_contact">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager.admin_contact">[docs]</a>
    <span class="k">def</span> <span class="nf">admin_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># this assumes there is at least one superuser</span>
        <span class="n">superusers</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_superuser</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">superusers</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;GeoNode needs at least one admin/superuser set&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">superusers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="ResourceBaseManager.get_queryset">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager.get_queryset">[docs]</a>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">non_polymorphic</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBaseManager.polymorphic_queryset">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager.polymorphic_queryset">[docs]</a>
    <span class="k">def</span> <span class="nf">polymorphic_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ResourceBaseManager.upload_files">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager.upload_files">[docs]</a>
    <span class="k">def</span> <span class="nf">upload_files</span><span class="p">(</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the ResourceBase model&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ff</span><span class="p">:</span>
                        <span class="n">folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
                        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                        <span class="n">file_uploaded_path</span> <span class="o">=</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ff</span><span class="p">)</span>
                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">storage_manager</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="n">file_uploaded_path</span><span class="p">))</span>

            <span class="c1"># making an update instead of save in order to avoid others</span>
            <span class="c1"># signal like post_save and commiunication with geoserver</span>
            <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ResourceBaseManager.cleanup_uploaded_files">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBaseManager.cleanup_uploaded_files">[docs]</a>
    <span class="k">def</span> <span class="nf">cleanup_uploaded_files</span><span class="p">(</span><span class="n">resource_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove uploaded files, if any&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">_resource</span> <span class="o">=</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="n">_uploaded_folder</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">_resource</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_file</span> <span class="ow">in</span> <span class="n">_resource</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">_file</span><span class="p">):</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">_uploaded_folder</span><span class="p">:</span>
                                <span class="n">_uploaded_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">storage_manager</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="n">_file</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">storage_manager</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">_file</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">_uploaded_folder</span> <span class="ow">and</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">_uploaded_folder</span><span class="p">):</span>
                        <span class="n">storage_manager</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">_uploaded_folder</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

                <span class="c1"># Do we want to delete the files also from the resource?</span>
                <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{})</span>

            <span class="c1"># Remove generated thumbnails, if any</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_resource</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">resource_type</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">_resource</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">uuid</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">remove_thumbs</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

            <span class="c1"># Remove the uploaded sessions, if any</span>
            <span class="k">if</span> <span class="s2">&quot;geonode.upload&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">geonode.upload.models</span> <span class="kn">import</span> <span class="n">Upload</span>

                <span class="c1"># Need to call delete one by one in order to invoke the</span>
                <span class="c1">#  &#39;delete&#39; overridden method</span>
                <span class="k">for</span> <span class="n">upload</span> <span class="ow">in</span> <span class="n">Upload</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">resource_id</span><span class="o">=</span><span class="n">_resource</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                    <span class="n">upload</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="ResourceBase">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase">[docs]</a>
<span class="k">class</span> <span class="nc">ResourceBase</span><span class="p">(</span><span class="n">PolymorphicModel</span><span class="p">,</span> <span class="n">PermissionLevelMixin</span><span class="p">,</span> <span class="n">ItemBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base Resource Object loosely based on ISO 19115:2003</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ResourceBase.BASE_PERMISSIONS">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.BASE_PERMISSIONS">[docs]</a>
    <span class="n">BASE_PERMISSIONS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;read&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;view_resourcebase&quot;</span><span class="p">],</span>
        <span class="s2">&quot;write&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;change_resourcebase_metadata&quot;</span><span class="p">],</span>
        <span class="s2">&quot;download&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;download_resourcebase&quot;</span><span class="p">],</span>
        <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;change_resourcebase&quot;</span><span class="p">,</span>
            <span class="s2">&quot;delete_resourcebase&quot;</span><span class="p">,</span>
            <span class="s2">&quot;change_resourcebase_permissions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;publish_resourcebase&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span></div>


<div class="viewcode-block" id="ResourceBase.PERMISSIONS">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.PERMISSIONS">[docs]</a>
    <span class="n">PERMISSIONS</span> <span class="o">=</span> <span class="p">{}</span></div>


<div class="viewcode-block" id="ResourceBase.VALID_DATE_TYPES">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.VALID_DATE_TYPES">[docs]</a>
    <span class="n">VALID_DATE_TYPES</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">_</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Creation&quot;</span><span class="p">,</span> <span class="s2">&quot;Publication&quot;</span><span class="p">,</span> <span class="s2">&quot;Revision&quot;</span><span class="p">]]</span></div>


<div class="viewcode-block" id="ResourceBase.abstract_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.abstract_help_text">[docs]</a>
    <span class="n">abstract_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;brief narrative summary of the content of the resource(s)&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.date_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.date_help_text">[docs]</a>
    <span class="n">date_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;reference date for the cited resource&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.date_type_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.date_type_help_text">[docs]</a>
    <span class="n">date_type_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;identification of when a given event occurred&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.edition_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.edition_help_text">[docs]</a>
    <span class="n">edition_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;version of the cited resource&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.attribution_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.attribution_help_text">[docs]</a>
    <span class="n">attribution_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;authority or function assigned, as to a ruler, legislative assembly, delegate, or the like.&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.doi_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.doi_help_text">[docs]</a>
    <span class="n">doi_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;a DOI will be added by Admin before publication.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.purpose_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.purpose_help_text">[docs]</a>
    <span class="n">purpose_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;summary of the intentions with which the resource(s) was developed&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.maintenance_frequency_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.maintenance_frequency_help_text">[docs]</a>
    <span class="n">maintenance_frequency_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;frequency with which modifications and deletions are made to the data after &quot;</span> <span class="s2">&quot;it is first produced&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.keywords_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.keywords_help_text">[docs]</a>
    <span class="n">keywords_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;commonly used word(s) or formalised word(s) or phrase(s) used to describe the subject &quot;</span>
        <span class="s2">&quot;(space or comma-separated)&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.tkeywords_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.tkeywords_help_text">[docs]</a>
    <span class="n">tkeywords_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;formalised word(s) or phrase(s) from a fixed thesaurus used to describe the subject &quot;</span>
        <span class="s2">&quot;(space or comma-separated)&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.regions_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.regions_help_text">[docs]</a>
    <span class="n">regions_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;keyword identifies a location&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.restriction_code_type_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.restriction_code_type_help_text">[docs]</a>
    <span class="n">restriction_code_type_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;limitation(s) placed upon the access or use of the data.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.constraints_other_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.constraints_other_help_text">[docs]</a>
    <span class="n">constraints_other_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;other restrictions and legal prerequisites for accessing and using the resource or&quot;</span> <span class="s2">&quot; metadata&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.license_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.license_help_text">[docs]</a>
    <span class="n">license_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;license of the dataset&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.language_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.language_help_text">[docs]</a>
    <span class="n">language_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;language used within the dataset&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.category_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.category_help_text">[docs]</a>
    <span class="n">category_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;high-level geographic data thematic classification to assist in the grouping and search of &quot;</span>
        <span class="s2">&quot;available geographic data sets.&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.spatial_representation_type_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.spatial_representation_type_help_text">[docs]</a>
    <span class="n">spatial_representation_type_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;method used to represent geographic information in the dataset.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.temporal_extent_start_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.temporal_extent_start_help_text">[docs]</a>
    <span class="n">temporal_extent_start_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;time period covered by the content of the dataset (start)&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.temporal_extent_end_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.temporal_extent_end_help_text">[docs]</a>
    <span class="n">temporal_extent_end_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;time period covered by the content of the dataset (end)&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.data_quality_statement_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.data_quality_statement_help_text">[docs]</a>
    <span class="n">data_quality_statement_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s2">&quot;general explanation of the data producer&#39;s knowledge about the lineage of a&quot;</span> <span class="s2">&quot; dataset&quot;</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.extra_metadata_help_text">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.extra_metadata_help_text">[docs]</a>
    <span class="n">extra_metadata_help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span>
        <span class="s1">&#39;Additional metadata, must be in format [ {&quot;metadata_key&quot;: &quot;metadata_value&quot;}, {&quot;metadata_key&quot;: &quot;metadata_value&quot;} ]&#39;</span>
    <span class="p">)</span></div>

    <span class="c1"># internal fields</span>
<div class="viewcode-block" id="ResourceBase.uuid">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.uuid">[docs]</a>
    <span class="n">uuid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.title">[docs]</a>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;name by which the cited resource is known&quot;</span><span class="p">))</span></div>

<div class="viewcode-block" id="ResourceBase.abstract">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.abstract">[docs]</a>
    <span class="n">abstract</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;abstract&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">abstract_help_text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.purpose">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.purpose">[docs]</a>
    <span class="n">purpose</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;purpose&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">purpose_help_text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.owner">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.owner">[docs]</a>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;owned_resource&quot;</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Owner&quot;</span><span class="p">),</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.contacts">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.contacts">[docs]</a>
    <span class="n">contacts</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s2">&quot;ContactRole&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.alternate">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.alternate">[docs]</a>
    <span class="n">alternate</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;alternate&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.date">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.date">[docs]</a>
    <span class="n">date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="n">now</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">date_help_text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.date_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.date_type">[docs]</a>
    <span class="n">date_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;date type&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">VALID_DATE_TYPES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;publication&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">date_type_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.edition">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.edition">[docs]</a>
    <span class="n">edition</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;edition&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">edition_help_text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.attribution">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.attribution">[docs]</a>
    <span class="n">attribution</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Attribution&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">attribution_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.doi">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.doi">[docs]</a>
    <span class="n">doi</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;DOI&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">doi_help_text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.maintenance_frequency">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.maintenance_frequency">[docs]</a>
    <span class="n">maintenance_frequency</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;maintenance frequency&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">UPDATE_FREQUENCIES</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">maintenance_frequency_help_text</span><span class="p">,</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.keywords">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.keywords">[docs]</a>
    <span class="n">keywords</span> <span class="o">=</span> <span class="n">TaggableManager</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;keywords&quot;</span><span class="p">),</span>
        <span class="n">through</span><span class="o">=</span><span class="n">TaggedContentItem</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">keywords_help_text</span><span class="p">,</span>
        <span class="n">manager</span><span class="o">=</span><span class="n">_HierarchicalTagManager</span><span class="p">,</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.tkeywords">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.tkeywords">[docs]</a>
    <span class="n">tkeywords</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">ThesaurusKeyword</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;keywords&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">tkeywords_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.regions">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.regions">[docs]</a>
    <span class="n">regions</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">Region</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;keywords region&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">regions_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.restriction_code_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.restriction_code_type">[docs]</a>
    <span class="n">restriction_code_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">RestrictionCodeType</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;restrictions&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">restriction_code_type_help_text</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">limit_choices_to</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">is_choice</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.constraints_other">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.constraints_other">[docs]</a>
    <span class="n">constraints_other</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;restrictions other&quot;</span><span class="p">),</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">constraints_other_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.license">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.license">[docs]</a>
    <span class="n">license</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">License</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;License&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">license_help_text</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.language">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.language">[docs]</a>
    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">ALL_LANGUAGES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">language_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.category">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.category">[docs]</a>
    <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">TopicCategory</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">limit_choices_to</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">is_choice</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">category_help_text</span><span class="p">,</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.spatial_representation_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.spatial_representation_type">[docs]</a>
    <span class="n">spatial_representation_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SpatialRepresentationType</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">limit_choices_to</span><span class="o">=</span><span class="n">Q</span><span class="p">(</span><span class="n">is_choice</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;spatial representation type&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">spatial_representation_type_help_text</span><span class="p">,</span>
    <span class="p">)</span></div>


    <span class="c1"># Section 5</span>
<div class="viewcode-block" id="ResourceBase.temporal_extent_start">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.temporal_extent_start">[docs]</a>
    <span class="n">temporal_extent_start</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;temporal extent start&quot;</span><span class="p">),</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">temporal_extent_start_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.temporal_extent_end">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.temporal_extent_end">[docs]</a>
    <span class="n">temporal_extent_end</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;temporal extent end&quot;</span><span class="p">),</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">temporal_extent_end_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.supplemental_information">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.supplemental_information">[docs]</a>
    <span class="n">supplemental_information</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;supplemental information&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">DEFAULT_SUPPLEMENTAL_INFORMATION</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;any other descriptive information about the dataset&quot;</span><span class="p">),</span>
    <span class="p">)</span></div>


    <span class="c1"># Section 8</span>
<div class="viewcode-block" id="ResourceBase.data_quality_statement">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.data_quality_statement">[docs]</a>
    <span class="n">data_quality_statement</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;data quality statement&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">data_quality_statement_help_text</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.group">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.group">[docs]</a>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">)</span></div>


    <span class="c1"># Section 9</span>
    <span class="c1"># see metadata_author property definition below</span>

    <span class="c1"># Save bbox values in the database.</span>
    <span class="c1"># This is useful for spatial searches and for generating thumbnail images</span>
    <span class="c1"># and metadata records.</span>
<div class="viewcode-block" id="ResourceBase.bbox_polygon">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_polygon">[docs]</a>
    <span class="n">bbox_polygon</span> <span class="o">=</span> <span class="n">PolygonField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.ll_bbox_polygon">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.ll_bbox_polygon">[docs]</a>
    <span class="n">ll_bbox_polygon</span> <span class="o">=</span> <span class="n">PolygonField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.srid">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.srid">[docs]</a>
    <span class="n">srid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span></div>


    <span class="c1"># CSW specific fields</span>
<div class="viewcode-block" id="ResourceBase.csw_typename">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_typename">[docs]</a>
    <span class="n">csw_typename</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW typename&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;gmd:MD_Metadata&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_schema">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_schema">[docs]</a>
    <span class="n">csw_schema</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW schema&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;http://www.isotc211.org/2005/gmd&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_mdsource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_mdsource">[docs]</a>
    <span class="n">csw_mdsource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW source&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_insert_date">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_insert_date">[docs]</a>
    <span class="n">csw_insert_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW insert date&quot;</span><span class="p">),</span> <span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_type">[docs]</a>
    <span class="n">csw_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW type&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">HIERARCHY_LEVELS</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_anytext">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_anytext">[docs]</a>
    <span class="n">csw_anytext</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW anytext&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.csw_wkt_geometry">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_wkt_geometry">[docs]</a>
    <span class="n">csw_wkt_geometry</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;CSW WKT geometry&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))&quot;</span>
    <span class="p">)</span></div>


    <span class="c1"># metadata XML specific fields</span>
<div class="viewcode-block" id="ResourceBase.metadata_uploaded">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_uploaded">[docs]</a>
    <span class="n">metadata_uploaded</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.metadata_uploaded_preserve">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_uploaded_preserve">[docs]</a>
    <span class="n">metadata_uploaded_preserve</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Metadata uploaded preserve&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.metadata_xml">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_xml">[docs]</a>
    <span class="n">metadata_xml</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&lt;gmd:MD_Metadata xmlns:gmd=&quot;http://www.isotc211.org/2005/gmd&quot;/&gt;&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.popular_count">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.popular_count">[docs]</a>
    <span class="n">popular_count</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.share_count">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.share_count">[docs]</a>
    <span class="n">share_count</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.featured">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.featured">[docs]</a>
    <span class="n">featured</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Featured&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Should this resource be advertised in home page?&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.was_published">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.was_published">[docs]</a>
    <span class="n">was_published</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Was Published&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Previous Published state.&quot;</span><span class="p">))</span></div>

<div class="viewcode-block" id="ResourceBase.is_published">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.is_published">[docs]</a>
    <span class="n">is_published</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is Published&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Should this resource be published and searchable?&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.was_approved">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.was_approved">[docs]</a>
    <span class="n">was_approved</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Was Approved&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Previous Approved state.&quot;</span><span class="p">))</span></div>

<div class="viewcode-block" id="ResourceBase.is_approved">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.is_approved">[docs]</a>
    <span class="n">is_approved</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Approved&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is this resource validated from a publisher or editor?&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


    <span class="c1"># fields necessary for the apis</span>
<div class="viewcode-block" id="ResourceBase.thumbnail_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.thumbnail_url">[docs]</a>
    <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Thumbnail url&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.thumbnail_path">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.thumbnail_path">[docs]</a>
    <span class="n">thumbnail_path</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Thumbnail path&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.rating">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.rating">[docs]</a>
    <span class="n">rating</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.created">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.created">[docs]</a>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ResourceBase.last_updated">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.last_updated">[docs]</a>
    <span class="n">last_updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.state">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.state">[docs]</a>
    <span class="n">state</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;State&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">STATE_READY</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">PROCESSING_STATES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Hold the resource processing state.&quot;</span><span class="p">),</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.sourcetype">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.sourcetype">[docs]</a>
    <span class="n">sourcetype</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Source Type&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">SOURCE_TYPE_LOCAL</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">enumerations</span><span class="o">.</span><span class="n">SOURCE_TYPES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;The resource source type, which can be one of &quot;LOCAL&quot;, &quot;REMOTE&quot; or &quot;COPYREMOTE&quot;.&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.remote_typename">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.remote_typename">[docs]</a>
    <span class="n">remote_typename</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Remote Service Typename&quot;</span><span class="p">),</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name of the Remote Service if any.&quot;</span><span class="p">),</span>
    <span class="p">)</span></div>


    <span class="c1"># fields controlling security state</span>
<div class="viewcode-block" id="ResourceBase.dirty_state">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.dirty_state">[docs]</a>
    <span class="n">dirty_state</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Dirty State&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Security Rules Are Not Synched with GeoServer!&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.users_geolimits">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.users_geolimits">[docs]</a>
    <span class="n">users_geolimits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;UserGeoLimit&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;users_geolimits&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.groups_geolimits">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.groups_geolimits">[docs]</a>
    <span class="n">groups_geolimits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;GroupGeoLimit&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;groups_geolimits&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.resource_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.resource_type">[docs]</a>
    <span class="n">resource_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Resource Type&quot;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.metadata_only">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_only">[docs]</a>
    <span class="n">metadata_only</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Metadata&quot;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;If true, will be excluded from search&quot;</span><span class="p">)</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.files">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.files">[docs]</a>
    <span class="n">files</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.blob">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.blob">[docs]</a>
    <span class="n">blob</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.subtype">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.subtype">[docs]</a>
    <span class="n">subtype</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.metadata">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata">[docs]</a>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="s2">&quot;ExtraMetadata&quot;</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Extra Metadata&quot;</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">extra_metadata_help_text</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.objects">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.objects">[docs]</a>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">ResourceBaseManager</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBase.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># custom permissions,</span>
        <span class="c1"># add, change and delete are standard in django-guardian</span>
<div class="viewcode-block" id="ResourceBase.Meta.permissions">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.Meta.permissions">[docs]</a>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="c1"># (&#39;view_resourcebase&#39;, &#39;Can view resource&#39;),</span>
            <span class="p">(</span><span class="s2">&quot;change_resourcebase_permissions&quot;</span><span class="p">,</span> <span class="s2">&quot;Can change resource permissions&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;download_resourcebase&quot;</span><span class="p">,</span> <span class="s2">&quot;Can download resource&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;publish_resourcebase&quot;</span><span class="p">,</span> <span class="s2">&quot;Can publish resource&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;change_resourcebase_metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;Can change resource metadata&quot;</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Provide legacy support for bbox fields</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;bbox_x0&quot;</span><span class="p">,</span> <span class="s2">&quot;bbox_y0&quot;</span><span class="p">,</span> <span class="s2">&quot;bbox_x1&quot;</span><span class="p">,</span> <span class="s2">&quot;bbox_y1&quot;</span><span class="p">)]</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;bbox_polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Polygon</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ll_bbox_polygon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Polygon</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="ResourceBase.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._remove_html_tags">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._remove_html_tags">[docs]</a>
    <span class="k">def</span> <span class="nf">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute_str</span><span class="p">):</span>
        <span class="n">_attribute_str</span> <span class="o">=</span> <span class="n">attribute_str</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;&lt;.*?&gt;&quot;</span><span class="p">)</span>
            <span class="n">_attribute_str</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span>
                <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">attribute_str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute_str</span><span class="p">:</span>
                <span class="n">_attribute_str</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">attribute_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">strip_tags</span><span class="p">(</span><span class="n">_attribute_str</span><span class="p">)</span></div>


    <span class="nd">@classproperty</span>
<div class="viewcode-block" id="ResourceBase.allowed_permissions">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.allowed_permissions">[docs]</a>
    <span class="k">def</span> <span class="nf">allowed_permissions</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;anonymous&quot;</span><span class="p">:</span> <span class="n">VIEW_PERMISSIONS</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">OWNER_PERMISSIONS</span><span class="p">,</span>
            <span class="n">groups_settings</span><span class="o">.</span><span class="n">REGISTERED_MEMBERS_GROUP_NAME</span><span class="p">:</span> <span class="n">OWNER_PERMISSIONS</span><span class="p">,</span>
        <span class="p">}</span></div>


    <span class="nd">@classproperty</span>
<div class="viewcode-block" id="ResourceBase.compact_permission_labels">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.compact_permission_labels">[docs]</a>
    <span class="k">def</span> <span class="nf">compact_permission_labels</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;none&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">),</span>
            <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;View&quot;</span><span class="p">),</span>
            <span class="s2">&quot;download&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Download&quot;</span><span class="p">),</span>
            <span class="s2">&quot;edit&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Edit&quot;</span><span class="p">),</span>
            <span class="s2">&quot;manage&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Manage&quot;</span><span class="p">),</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Owner&quot;</span><span class="p">),</span>
        <span class="p">}</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.raw_abstract">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.raw_abstract">[docs]</a>
    <span class="k">def</span> <span class="nf">raw_abstract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.raw_purpose">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.raw_purpose">[docs]</a>
    <span class="k">def</span> <span class="nf">raw_purpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">purpose</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.raw_constraints_other">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.raw_constraints_other">[docs]</a>
    <span class="k">def</span> <span class="nf">raw_constraints_other</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constraints_other</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.raw_supplemental_information">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.raw_supplemental_information">[docs]</a>
    <span class="k">def</span> <span class="nf">raw_supplemental_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supplemental_information</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.raw_data_quality_statement">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.raw_data_quality_statement">[docs]</a>
    <span class="k">def</span> <span class="nf">raw_data_quality_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_html_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_quality_statement</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.detail_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.detail_url">[docs]</a>
    <span class="k">def</span> <span class="nf">detail_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_absolute_url</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBase.clean">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.clean">[docs]</a>
    <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBase.save">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.save">[docs]</a>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a notification when a resource is created or updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">polymorphic_ctype</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">polymorphic_ctype</span><span class="o">.</span><span class="n">model</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">polymorphic_ctype</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># Resource Updated</span>
        <span class="n">_notification_sent</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">_group_status_changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">_approval_status_changed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;class_name&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">notify</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="c1"># Resource Created</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">notice_type_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_created&quot;</span>
                <span class="n">recipients</span> <span class="o">=</span> <span class="n">get_notification_recipients</span><span class="p">(</span><span class="n">notice_type_label</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">send_notification</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="n">notice_type_label</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
                <span class="c1"># Group has changed</span>
                <span class="n">_group_status_changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">!=</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_self_resource</span><span class="p">()</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">group</span>

                <span class="c1"># Approval Notifications Here</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">was_approved</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_approved</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">_notification_sent</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">was_approved</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_approved</span><span class="p">:</span>
                        <span class="c1"># Send &quot;approved&quot; notification</span>
                        <span class="n">notice_type_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_approved&quot;</span>
                        <span class="n">recipients</span> <span class="o">=</span> <span class="n">get_notification_recipients</span><span class="p">(</span><span class="n">notice_type_label</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                        <span class="n">send_notification</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="n">notice_type_label</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>
                        <span class="n">_notification_sent</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">was_approved</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_approved</span>
                    <span class="n">_approval_status_changed</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="c1"># Publishing Notifications Here</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">was_published</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_published</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">_notification_sent</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">was_published</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_published</span><span class="p">:</span>
                        <span class="c1"># Send &quot;published&quot; notification</span>
                        <span class="n">notice_type_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_published&quot;</span>
                        <span class="n">recipients</span> <span class="o">=</span> <span class="n">get_notification_recipients</span><span class="p">(</span><span class="n">notice_type_label</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                        <span class="n">send_notification</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="n">notice_type_label</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>
                        <span class="n">_notification_sent</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">was_published</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_published</span>
                    <span class="n">_approval_status_changed</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="c1"># Updated Notifications Here</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_notification_sent</span><span class="p">:</span>
                    <span class="n">notice_type_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_updated&quot;</span>
                    <span class="n">recipients</span> <span class="o">=</span> <span class="n">get_notification_recipients</span><span class="p">(</span><span class="n">notice_type_label</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                    <span class="n">send_notification</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="n">notice_type_label</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_initial_value</span> <span class="o">=</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Max</span><span class="p">(</span><span class="s2">&quot;pk&quot;</span><span class="p">))[</span><span class="s2">&quot;pk__max&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_initial_value</span><span class="p">:</span>
                <span class="n">_initial_value</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_initial_value</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">_next_value</span> <span class="o">=</span> <span class="n">get_next_value</span><span class="p">(</span><span class="s2">&quot;ResourceBase&quot;</span><span class="p">,</span> <span class="n">initial_value</span><span class="o">=</span><span class="n">_initial_value</span><span class="p">)</span>  <span class="c1"># type(self).__name__,</span>
            <span class="k">if</span> <span class="n">_initial_value</span> <span class="o">&gt;</span> <span class="n">_next_value</span><span class="p">:</span>
                <span class="n">Sequence</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ResourceBase&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="n">_initial_value</span><span class="p">)</span>
                <span class="n">_next_value</span> <span class="o">=</span> <span class="n">_initial_value</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">_next_value</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="ow">or</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Update workflow permissions</span>
        <span class="k">if</span> <span class="n">_approval_status_changed</span> <span class="ow">or</span> <span class="n">_group_status_changed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_permissions</span><span class="p">(</span>
                <span class="n">approval_status_changed</span><span class="o">=</span><span class="n">_approval_status_changed</span><span class="p">,</span> <span class="n">group_status_changed</span><span class="o">=</span><span class="n">_group_status_changed</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.delete">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.delete">[docs]</a>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a notification when a layer, map or document is deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">geonode.resource.manager</span> <span class="kn">import</span> <span class="n">resource_manager</span>

        <span class="n">resource_manager</span><span class="o">.</span><span class="n">remove_permissions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;class_name&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">notify</span><span class="p">:</span>
            <span class="n">notice_type_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_deleted&quot;</span>
            <span class="n">recipients</span> <span class="o">=</span> <span class="n">get_notification_recipients</span><span class="p">(</span><span class="n">notice_type_label</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">send_notification</span><span class="p">(</span><span class="n">recipients</span><span class="p">,</span> <span class="n">notice_type_label</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.get_upload_session">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_upload_session">[docs]</a>
    <span class="k">def</span> <span class="nf">get_upload_session</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.site_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.site_url">[docs]</a>
    <span class="k">def</span> <span class="nf">site_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">SITEURL</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.creator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.creator">[docs]</a>
    <span class="k">def</span> <span class="nf">creator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">username</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.perms">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.perms">[docs]</a>
    <span class="k">def</span> <span class="nf">perms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.organizationname">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.organizationname">[docs]</a>
    <span class="k">def</span> <span class="nf">organizationname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">organization</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.restriction_code">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.restriction_code">[docs]</a>
    <span class="k">def</span> <span class="nf">restriction_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">restriction_code_type</span><span class="o">.</span><span class="n">gn_description</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">restriction_code_type</span> <span class="k">else</span> <span class="kc">None</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.topiccategory">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.topiccategory">[docs]</a>
    <span class="k">def</span> <span class="nf">topiccategory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">identifier</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="k">else</span> <span class="kc">None</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.csw_crs">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.csw_crs">[docs]</a>
    <span class="k">def</span> <span class="nf">csw_crs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;EPSG:4326&quot;</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.group_name">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.group_name">[docs]</a>
    <span class="k">def</span> <span class="nf">group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;replace&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="k">else</span> <span class="kc">None</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.bbox">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format: [x0, x1, y0, y1, srid].&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^(EPSG:)?(?P&lt;srid&gt;\d{4,6})$&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">srid</span><span class="p">)</span>
            <span class="n">srid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;srid&quot;</span><span class="p">))</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="mi">4326</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;EPSG:</span><span class="si">{</span><span class="n">srid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.ll_bbox">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.ll_bbox">[docs]</a>
    <span class="k">def</span> <span class="nf">ll_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format [x0, x1, y0, y1, &quot;EPSG:srid&quot;]. Provides backwards</span>
<span class="sd">        compatibility after transition to polygons.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="p">:</span>
            <span class="n">_bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="o">.</span><span class="n">extent</span>
            <span class="n">srid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="o">.</span><span class="n">srid</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">_bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;EPSG:</span><span class="si">{</span><span class="n">srid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.ll_bbox_string">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.ll_bbox_string">[docs]</a>
    <span class="k">def</span> <span class="nf">ll_bbox_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;WGS84 BBOX is in the format: [x0,y0,x1,y1].&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>

            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.bbox_string">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_string">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BBOX is in the format: [x0, y0, x1, y1]. Provides backwards compatibility</span>
<span class="sd">        after transition to polygons.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>

            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="si">:</span><span class="s2">.7f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">]</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.bbox_helper">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_helper">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BBOXHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">]</span></div>


    <span class="nd">@cached_property</span>
<div class="viewcode-block" id="ResourceBase.bbox_x0">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_x0">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_x0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@cached_property</span>
<div class="viewcode-block" id="ResourceBase.bbox_x1">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_x1">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@cached_property</span>
<div class="viewcode-block" id="ResourceBase.bbox_y0">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_y0">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_y0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@cached_property</span>
<div class="viewcode-block" id="ResourceBase.bbox_y1">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.bbox_y1">[docs]</a>
    <span class="k">def</span> <span class="nf">bbox_y1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.geographic_bounding_box">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.geographic_bounding_box">[docs]</a>
    <span class="k">def</span> <span class="nf">geographic_bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an EWKT representation of the bounding box in EPSG:4326</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">polygon_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="o">.</span><span class="n">extent</span><span class="p">,</span> <span class="mi">4326</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">BBOXHelper</span><span class="o">.</span><span class="n">from_xy</span><span class="p">([</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">bbox_to_wkt</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.license_light">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.license_light">[docs]</a>
    <span class="k">def</span> <span class="nf">license_light</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.license_verbose">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.license_verbose">[docs]</a>
    <span class="k">def</span> <span class="nf">license_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name_long</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name_long</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">name_long</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">description</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">license</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.metadata_completeness">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_completeness">[docs]</a>
    <span class="k">def</span> <span class="nf">metadata_completeness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">required_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;abstract&quot;</span><span class="p">,</span>
            <span class="s2">&quot;category&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data_quality_statement&quot;</span><span class="p">,</span>
            <span class="s2">&quot;date&quot;</span><span class="p">,</span>
            <span class="s2">&quot;date_type&quot;</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">,</span>
            <span class="s2">&quot;license&quot;</span><span class="p">,</span>
            <span class="s2">&quot;regions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;title&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">restriction_code_type</span> <span class="o">==</span> <span class="s2">&quot;otherRestrictions&quot;</span><span class="p">:</span>
            <span class="n">required_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;constraints_other&quot;</span><span class="p">)</span>
        <span class="n">filled_fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">required_field</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required_field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">required_field</span> <span class="o">==</span> <span class="s2">&quot;license&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Not Specified&quot;</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">if</span> <span class="n">required_field</span> <span class="o">==</span> <span class="s2">&quot;regions&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                        <span class="k">continue</span>
                <span class="k">if</span> <span class="n">required_field</span> <span class="o">==</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="n">filled_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">filled_fields</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">required_fields</span><span class="p">)</span><span class="si">}</span><span class="s2">%&quot;</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.instance_is_processed">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.instance_is_processed">[docs]</a>
    <span class="k">def</span> <span class="nf">instance_is_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">(),</span> <span class="s2">&quot;processed&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">processed</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.is_copyable">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.is_copyable">[docs]</a>
    <span class="k">def</span> <span class="nf">is_copyable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">geonode.geoserver.helpers</span> <span class="kn">import</span> <span class="n">select_relevant_files</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_type</span> <span class="o">==</span> <span class="s2">&quot;dataset&quot;</span><span class="p">:</span>
            <span class="n">allowed_file</span> <span class="o">=</span> <span class="n">select_relevant_files</span><span class="p">(</span><span class="n">get_allowed_extensions</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">allowed_file</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="ResourceBase.keyword_list">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.keyword_list">[docs]</a>
    <span class="k">def</span> <span class="nf">keyword_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">kw</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span></div>


<div class="viewcode-block" id="ResourceBase.keyword_slug_list">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.keyword_slug_list">[docs]</a>
    <span class="k">def</span> <span class="nf">keyword_slug_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">kw</span><span class="o">.</span><span class="n">slug</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span></div>


<div class="viewcode-block" id="ResourceBase.region_name_list">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.region_name_list">[docs]</a>
    <span class="k">def</span> <span class="nf">region_name_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">region</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">regions</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span></div>


<div class="viewcode-block" id="ResourceBase.spatial_representation_type_string">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.spatial_representation_type_string">[docs]</a>
    <span class="k">def</span> <span class="nf">spatial_representation_type_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spatial_representation_type</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spatial_representation_type</span><span class="o">.</span><span class="n">identifier</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;subtype&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="s2">&quot;raster&quot;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;grid&quot;</span>
                <span class="k">return</span> <span class="s2">&quot;vector&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ResourceBase.set_dirty_state">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_dirty_state">[docs]</a>
    <span class="k">def</span> <span class="nf">set_dirty_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirty_state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dirty_state</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dirty_state</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.clear_dirty_state">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.clear_dirty_state">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_dirty_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirty_state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dirty_state</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dirty_state</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.set_processing_state">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_processing_state">[docs]</a>
    <span class="k">def</span> <span class="nf">set_processing_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">STATE_PROCESSED</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_dirty_state</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">state</span> <span class="o">==</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">STATE_INVALID</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_dirty_state</span><span class="p">()</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.processed">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.processed">[docs]</a>
    <span class="k">def</span> <span class="nf">processed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">STATE_PROCESSED</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirty_state</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.keyword_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.keyword_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">keyword_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">keywords_qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">keywords</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">keywords_qs</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">keywords_qs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>


<div class="viewcode-block" id="ResourceBase.get_absolute_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_absolute_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">get_absolute_url</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ResourceBase.set_bbox_polygon">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_bbox_polygon">[docs]</a>
    <span class="k">def</span> <span class="nf">set_bbox_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">srid</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set `bbox_polygon` from bbox values.</span>

<span class="sd">        :param bbox: list or tuple formatted as</span>
<span class="sd">            [xmin, ymin, xmax, ymax]</span>
<span class="sd">        :param srid: srid as string (e.g. &#39;EPSG:4326&#39; or &#39;4326&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bbox_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span> <span class="o">=</span> <span class="n">bbox_polygon</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">srid</span> <span class="o">=</span> <span class="n">srid</span>
            <span class="c1"># This is a trick in order to avoid PostGIS reprojecting the bbox at save time</span>
            <span class="c1"># by assuming the default geometries have &#39;EPSG:4326&#39; as srid.</span>
            <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">bbox_polygon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_polygon</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="n">srid</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ll_bbox_polygon</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="n">srid</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.set_ll_bbox_polygon">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_ll_bbox_polygon">[docs]</a>
    <span class="k">def</span> <span class="nf">set_ll_bbox_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set `ll_bbox_polygon` from bbox values.</span>

<span class="sd">        :param bbox: list or tuple formatted as</span>
<span class="sd">            [xmin, ymin, xmax, ymax]</span>
<span class="sd">        :param srid: srid as string (e.g. &#39;EPSG:4326&#39; or &#39;4326&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bbox_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">srid</span> <span class="o">==</span> <span class="mi">4326</span> <span class="ow">or</span> <span class="n">srid</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;EPSG:4326&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span> <span class="o">=</span> <span class="n">bbox_polygon</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^(EPSG:)?(?P&lt;srid&gt;\d{4,6})$&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">srid</span><span class="p">))</span>
                <span class="n">bbox_polygon</span><span class="o">.</span><span class="n">srid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;srid&quot;</span><span class="p">))</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="mi">4326</span>

                <span class="c1"># Adapt coords order from xmin,ymin,xmax,ymax to xmin,xmax,ymin,ymax</span>
                <span class="n">standard_extent</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bbox_polygon</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
                <span class="n">bbox_gn_order</span> <span class="o">=</span> <span class="n">bbox_swap</span><span class="p">(</span><span class="n">standard_extent</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">srid</span><span class="p">]</span>
                <span class="n">projected_bbox_gn_order</span> <span class="o">=</span> <span class="n">bbox_to_projection</span><span class="p">(</span><span class="n">bbox_gn_order</span><span class="p">)</span>
                <span class="n">projected_bbox</span> <span class="o">=</span> <span class="n">bbox_swap</span><span class="p">(</span><span class="n">projected_bbox_gn_order</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="o">.</span><span class="n">from_bbox</span><span class="p">(</span><span class="n">projected_bbox</span><span class="p">)</span>
            <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ll_bbox_polygon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GeoNodeException</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.set_bounds_from_bbox">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_bounds_from_bbox">[docs]</a>
    <span class="k">def</span> <span class="nf">set_bounds_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">srid</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate zoom level and center coordinates in mercator.</span>

<span class="sd">        :param bbox: BBOX is either a `geos.Pologyon` or in the</span>
<span class="sd">            format: [x0, x1, y0, y1], which is:</span>
<span class="sd">            [min lon, max lon, min lat, max lat] or</span>
<span class="sd">            [xmin, xmax, ymin, ymax]</span>
<span class="sd">        :type bbox: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bbox_polygon</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">extent</span><span class="p">,</span> <span class="n">srid</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_center_zoom</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bbox_polygon</span><span class="p">([</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">srid</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_center_zoom</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">bbox</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bounding Box cannot be empty </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> for a given resource&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">srid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Projection cannot be empty </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> for a given resource&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">srid</span> <span class="o">=</span> <span class="n">srid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_bbox_polygon</span><span class="p">((</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="n">srid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_center_zoom</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBase.set_center_zoom">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_center_zoom">[docs]</a>
    <span class="k">def</span> <span class="nf">set_center_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the center coordinates and zoom level in EPSG:4326</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll_bbox_polygon</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
            <span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">coords</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">,</span> <span class="n">srid</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">center_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center_y</span> <span class="o">=</span> <span class="n">center</span><span class="o">.</span><span class="n">coords</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ext</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">extent</span>
                <span class="n">width_zoom</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">360</span> <span class="o">/</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">height_zoom</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">360</span> <span class="o">/</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">width_zoom</span><span class="p">,</span> <span class="n">height_zoom</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                <span class="k">pass</span></div>


<div class="viewcode-block" id="ResourceBase.download_links">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.download_links">[docs]</a>
    <span class="k">def</span> <span class="nf">download_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;assemble download links for pycsw&quot;&quot;&quot;</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">link_type</span> <span class="o">==</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span>  <span class="c1"># avoid recursion</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">link_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
                <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="s2">&quot;Web address (URL)&quot;</span><span class="p">,</span> <span class="s2">&quot;WWW:LINK-1.0-http--link&quot;</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">link</span><span class="o">.</span><span class="n">link_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;OGC:WMS&quot;</span><span class="p">,</span> <span class="s2">&quot;OGC:WFS&quot;</span><span class="p">,</span> <span class="s2">&quot;OGC:WCS&quot;</span><span class="p">):</span>
                <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">link_type</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_link_type</span> <span class="o">=</span> <span class="s2">&quot;WWW:DOWNLOAD-1.0-http--download&quot;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">_store_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">(),</span> <span class="s2">&quot;subtype&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">_store_type</span> <span class="ow">and</span> <span class="n">_store_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;tileStore&quot;</span><span class="p">,</span> <span class="s2">&quot;remote&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">link</span><span class="o">.</span><span class="n">extension</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">):</span>
                        <span class="n">_remote_service</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">(),</span> <span class="s2">&quot;_remote_service&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">_remote_service</span><span class="p">:</span>
                            <span class="n">_link_type</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;WWW:DOWNLOAD-</span><span class="si">{</span><span class="n">_remote_service</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">link</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> Format)&quot;</span>
                <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">_link_type</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">links</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.embed_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.embed_url">[docs]</a>
    <span class="k">def</span> <span class="nf">embed_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span><span class="o">.</span><span class="n">embed_url</span> <span class="k">if</span> <span class="bp">self</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_instance</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ResourceBase.get_tiles_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_tiles_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_tiles_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return URL for Z/Y/X mapping clients or None if it does not exist.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tiles_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Tiles&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">Link</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tiles_link</span><span class="o">.</span><span class="n">url</span></div>


<div class="viewcode-block" id="ResourceBase.get_legend">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_legend">[docs]</a>
    <span class="k">def</span> <span class="nf">get_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Link for legend or None if it does not exist.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">legends_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Legend&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">Link</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="n">tb</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">tb</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="n">Link</span><span class="o">.</span><span class="n">MultipleObjectsReturned</span><span class="p">:</span>
            <span class="n">tb</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">tb</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">legends_link</span></div>


<div class="viewcode-block" id="ResourceBase.get_legend_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_legend_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_legend_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return URL for legend or None if it does not exist.</span>

<span class="sd">        The legend can be either an image (for Geoserver&#39;s WMS)</span>
<span class="sd">        or a JSON object for ArcGIS.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">legend</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">legend</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">style_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">legend</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">url</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_legend</span> <span class="ow">in</span> <span class="n">legend</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">style_name</span> <span class="ow">in</span> <span class="n">_legend</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">_legend</span><span class="o">.</span><span class="n">url</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ResourceBase.get_ows_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_ows_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_ows_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return URL for OGC WMS server None if it does not exist.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ows_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;OGC:WMS&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">Link</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ows_link</span><span class="o">.</span><span class="n">url</span></div>


<div class="viewcode-block" id="ResourceBase.get_thumbnail_url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_thumbnail_url">[docs]</a>
    <span class="k">def</span> <span class="nf">get_thumbnail_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a thumbnail url.</span>

<span class="sd">        It could be a local one if it exists, a remote one (WMS GetImage) for example</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_thumbnail_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_url</span>
        <span class="n">local_thumbnails</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Thumbnail&quot;</span><span class="p">)</span>
        <span class="n">remote_thumbnails</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Remote Thumbnail&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">local_thumbnails</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">_thumbnail_url</span> <span class="o">=</span> <span class="n">local_thumbnails</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">url</span>
        <span class="k">elif</span> <span class="n">remote_thumbnails</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">_thumbnail_url</span> <span class="o">=</span> <span class="n">remote_thumbnails</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">url</span>
        <span class="k">return</span> <span class="n">_thumbnail_url</span></div>


<div class="viewcode-block" id="ResourceBase.has_thumbnail">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.has_thumbnail">[docs]</a>
    <span class="k">def</span> <span class="nf">has_thumbnail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if the thumbnail object exists and an image exists&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Thumbnail&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span></div>


    <span class="c1"># Note - you should probably broadcast layer#post_save() events to ensure</span>
    <span class="c1"># that indexing (or other listeners) are notified</span>
<div class="viewcode-block" id="ResourceBase.save_thumbnail">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.save_thumbnail">[docs]</a>
    <span class="k">def</span> <span class="nf">save_thumbnail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">upload_path</span> <span class="o">=</span> <span class="n">get_unique_upload_path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="c1"># force convertion to JPEG output file</span>
        <span class="n">upload_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">upload_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Check that the image is valid</span>
            <span class="k">if</span> <span class="n">is_monochromatic_image</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_url</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">image</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Generated thumbnail image is blank&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Skip Image creation</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">upload_path</span> <span class="ow">and</span> <span class="n">image</span><span class="p">:</span>
                <span class="n">actual_name</span> <span class="o">=</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">upload_path</span><span class="p">,</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>
                <span class="n">actual_file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">actual_name</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">filename</span> <span class="o">!=</span> <span class="n">actual_file_name</span><span class="p">:</span>
                    <span class="n">upload_path</span> <span class="o">=</span> <span class="n">upload_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">actual_file_name</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">upload_path</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Optimize the Thumbnail size and resolution</span>
                    <span class="n">_default_thumb_size</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">THUMBNAIL_SIZE</span>
                    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">storage_manager</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">actual_name</span><span class="p">))</span>
                    <span class="n">centering</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;centering&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
                    <span class="n">cover</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
                        <span class="n">im</span><span class="p">,</span> <span class="p">(</span><span class="n">_default_thumb_size</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="n">_default_thumb_size</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]),</span> <span class="n">centering</span><span class="o">=</span><span class="n">centering</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>

                    <span class="c1"># Saving the thumb into a temporary directory on file system</span>
                    <span class="n">tmp_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">upload_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">cover</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">tmp_location</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">)</span>

                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmp_location</span><span class="p">,</span> <span class="s2">&quot;rb+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">img</span><span class="p">:</span>
                        <span class="c1"># Saving the img via storage manager</span>
                        <span class="n">storage_manager</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">storage_manager</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="n">upload_path</span><span class="p">),</span> <span class="n">img</span><span class="p">)</span>

                    <span class="c1"># If we use a remote storage, the local img is deleted</span>
                    <span class="k">if</span> <span class="n">tmp_location</span> <span class="o">!=</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">path</span><span class="p">(</span><span class="n">upload_path</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmp_location</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

                <span class="c1"># check whether it is an URI or not</span>
                <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlsplit</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed</span><span class="o">.</span><span class="n">netloc</span><span class="p">:</span>
                    <span class="c1"># assuming is a relative path to current site</span>
                    <span class="n">site_url</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">SITEURL</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">SITEURL</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">settings</span><span class="o">.</span><span class="n">SITEURL</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">site_url</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">thumb_size</span><span class="p">(</span><span class="n">upload_path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Generated thumbnail image is zero size&quot;</span><span class="p">)</span>

                <span class="c1"># should only have one &#39;Thumbnail&#39; link</span>
                <span class="n">Link</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Thumbnail&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
                <span class="n">obj</span><span class="p">,</span> <span class="n">_created</span> <span class="o">=</span> <span class="n">Link</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                    <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Thumbnail&quot;</span><span class="p">,</span>
                    <span class="n">defaults</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
                        <span class="n">mime</span><span class="o">=</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
                        <span class="n">link_type</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>
                <span class="c1"># Cleaning up the old stuff</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_path</span> <span class="ow">and</span> <span class="n">storage_manager</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_path</span><span class="p">):</span>
                    <span class="n">storage_manager</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_path</span><span class="p">)</span>
                <span class="c1"># Store the new url and path</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_url</span> <span class="o">=</span> <span class="n">url</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail_path</span> <span class="o">=</span> <span class="n">upload_path</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">thumbnail_url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">thumbnail_path</span><span class="o">=</span><span class="n">upload_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error when generating the thumbnail for resource </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">. (</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">Link</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Thumbnail&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error when generating the thumbnail for resource </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">. (</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.set_missing_info">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_missing_info">[docs]</a>
    <span class="k">def</span> <span class="nf">set_missing_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set default permissions and point of contacts.</span>

<span class="sd">        It is mandatory to call it from descendant classes</span>
<span class="sd">        but hard to enforce technically via signals or save overriding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">admin_contact</span><span class="p">()</span><span class="o">.</span><span class="n">user</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poc</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">poc</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_author</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata_author</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span>

        <span class="kn">from</span> <span class="nn">guardian.models</span> <span class="kn">import</span> <span class="n">UserObjectPermission</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking for permissions.&quot;</span><span class="p">)</span>
        <span class="c1">#  True if every key in the get_all_level_info dict is empty.</span>
        <span class="n">no_custom_permissions</span> <span class="o">=</span> <span class="n">UserObjectPermission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">content_type</span><span class="o">=</span><span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_self_resource</span><span class="p">()),</span> <span class="n">object_pk</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">no_custom_permissions</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;There are no permissions for this object, setting default perms.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_default_permissions</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.maintenance_frequency_title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.maintenance_frequency_title">[docs]</a>
    <span class="k">def</span> <span class="nf">maintenance_frequency_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">UPDATE_FREQUENCIES</span> <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">maintenance_frequency</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">()</span></div>


<div class="viewcode-block" id="ResourceBase.language_title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.language_title">[docs]</a>
    <span class="k">def</span> <span class="nf">language_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">ALL_LANGUAGES</span> <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">()</span></div>


    <span class="c1"># Contact Roles</span>
<div class="viewcode-block" id="ResourceBase.add_missing_metadata_author_or_poc">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.add_missing_metadata_author_or_poc">[docs]</a>
    <span class="k">def</span> <span class="nf">add_missing_metadata_author_or_poc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set metadata_author and/or point of contact (poc) to a resource when any of them is missing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_author</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata_author</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poc</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">poc</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">]</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ResourceBase.get_multivalue_role_property_names">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_multivalue_role_property_names">[docs]</a>
    <span class="k">def</span> <span class="nf">get_multivalue_role_property_names</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns list of property names for all contact roles able to</span>
<span class="sd">            handle multiple profile_users</span>

<span class="sd">        Returns:</span>
<span class="sd">            _type_: List(str)</span>
<span class="sd">            _description: list of names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">role</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">Roles</span><span class="o">.</span><span class="n">get_multivalue_ones</span><span class="p">()]</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ResourceBase.get_multivalue_required_role_property_names">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_multivalue_required_role_property_names">[docs]</a>
    <span class="k">def</span> <span class="nf">get_multivalue_required_role_property_names</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns list of property names for all contact roles that are required</span>

<span class="sd">        Returns:</span>
<span class="sd">            _type_: List(str)</span>
<span class="sd">            _description: list of names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">role</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">Roles</span><span class="o">.</span><span class="n">get_multivalue_ones</span><span class="p">())</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">Roles</span><span class="o">.</span><span class="n">get_required_ones</span><span class="p">()))]</span></div>


    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ResourceBase.get_ui_toggled_role_property_names">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_ui_toggled_role_property_names">[docs]</a>
    <span class="k">def</span> <span class="nf">get_ui_toggled_role_property_names</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns list of property names for all contact roles that are toggled of in metadata_editor</span>

<span class="sd">        Returns:</span>
<span class="sd">            _type_: List(str)</span>
<span class="sd">            _description: list of names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">role</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">Roles</span><span class="o">.</span><span class="n">get_toggled_ones</span><span class="p">())</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">Roles</span><span class="o">.</span><span class="n">get_toggled_ones</span><span class="p">()))]</span></div>


    <span class="c1"># typing not possible due to: from geonode.base.forms import ResourceBaseForm; unable due to circular ...</span>
<div class="viewcode-block" id="ResourceBase.set_contact_roles_from_metadata_edit">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.set_contact_roles_from_metadata_edit">[docs]</a>
    <span class="k">def</span> <span class="nf">set_contact_roles_from_metadata_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_base_form</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;gets a ResourceBaseForm and extracts the Contact Role elements from it</span>

<span class="sd">        Args:</span>
<span class="sd">            resource_base_form (ResourceBaseForm): ResourceBaseForm with contact roles set</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: true if all contact roles could be set, else false</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">failed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_multivalue_role_property_names</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">role</span><span class="p">,</span> <span class="n">resource_base_form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="n">role</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unable to set contact role </span><span class="si">{</span><span class="n">role</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
                <span class="n">failed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">failed</span></div>


<div class="viewcode-block" id="ResourceBase.__get_contact_role_elements__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.__get_contact_role_elements__">[docs]</a>
    <span class="k">def</span> <span class="nf">__get_contact_role_elements__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;general getter of for all contact roles except owner</span>

<span class="sd">        Args:</span>
<span class="sd">            role (str): string coresponding to ROLE_VALUES in geonode/people/enumarations, defining which propery is requested</span>
<span class="sd">        Returns:</span>
<span class="sd">            Optional[List[settings.AUTH_USER_MODEL]]: returns the requested contact role from the database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">contact_role</span> <span class="o">=</span> <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">contacts</span> <span class="o">=</span> <span class="p">[</span><span class="n">cr</span><span class="o">.</span><span class="n">contact</span> <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">contact_role</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">ContactRole</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="n">contacts</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">contacts</span></div>


    <span class="c1"># types allowed as input for Contact role properties</span>
<div class="viewcode-block" id="ResourceBase.CONTACT_ROLE_USER_PROFILES_ALLOWED_TYPES">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.CONTACT_ROLE_USER_PROFILES_ALLOWED_TYPES">[docs]</a>
    <span class="n">CONTACT_ROLE_USER_PROFILES_ALLOWED_TYPES</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">QuerySet</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">]]</span></div>


<div class="viewcode-block" id="ResourceBase.__set_contact_role_element__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.__set_contact_role_element__">[docs]</a>
    <span class="k">def</span> <span class="nf">__set_contact_role_element__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">:</span> <span class="n">CONTACT_ROLE_USER_PROFILES_ALLOWED_TYPES</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;general setter for all contact roles except owner in resource base</span>

<span class="sd">        Args:</span>
<span class="sd">            user_profile (CONTACT_ROLE_USER_PROFILES_ALLOWED_TYPES): _description_</span>
<span class="sd">            role (str): tring coresponding to ROLE_VALUES in geonode/people/enumarations, defining which propery is to set</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">__create_role__</span><span class="p">(</span>
            <span class="n">resource</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="n">resource</span><span class="p">,</span> <span class="n">contact</span><span class="o">=</span><span class="n">user_profile</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">QuerySet</span><span class="p">):</span>
            <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">__create_role__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">user_profile</span><span class="p">]</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">get_user_model</span><span class="p">()):</span>
            <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">__create_role__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_profile</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span>
            <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">user_profile</span>
        <span class="p">):</span>
            <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">__create_role__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username__in</span><span class="o">=</span><span class="n">user_profile</span><span class="p">)</span>
            <span class="p">]</span>

        <span class="k">elif</span> <span class="n">user_profile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ContactRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">role</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bad profile format for role: </span><span class="si">{</span><span class="n">role</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.get_defined_multivalue_contact_roles">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_defined_multivalue_contact_roles">[docs]</a>
    <span class="k">def</span> <span class="nf">get_defined_multivalue_contact_roles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all set contact roles of the ressource with additional ROLE_VALUES from geonode.people.enumarations.ROLE_VALUES. Mainly used to generate output xml more easy.</span>

<span class="sd">        Returns:</span>
<span class="sd">              _type_: List[Tuple[List[people object], roles_label_name]]</span>
<span class="sd">              _description: list tuples including two elements: 1. list of people have a certain role. 2. role label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">role</span><span class="o">.</span><span class="n">label</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">Roles</span><span class="o">.</span><span class="n">get_multivalue_ones</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="ResourceBase.get_first_contact_of_role">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_first_contact_of_role">[docs]</a>
    <span class="k">def</span> <span class="nf">get_first_contact_of_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ContactRole</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the first contact from the specified role.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            role (str): The role of the contact.</span>

<span class="sd">        Returns:</span>
<span class="sd">            ContactRole or None: The first contact with the specified role, or None if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">contact</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">contact</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


    <span class="c1"># Contact Role: POC (pointOfContact)</span>
<div class="viewcode-block" id="ResourceBase.__get_poc__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.__get_poc__">[docs]</a>
    <span class="k">def</span> <span class="nf">__get_poc__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;pointOfContact&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.__set_poc__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.__set_poc__">[docs]</a>
    <span class="k">def</span> <span class="nf">__set_poc__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;pointOfContact&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.poc">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.poc">[docs]</a>
    <span class="n">poc</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">__get_poc__</span><span class="p">,</span> <span class="n">__set_poc__</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.poc_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.poc_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">poc_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">poc</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: metadata_author</span>
<div class="viewcode-block" id="ResourceBase._get_metadata_author">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_metadata_author">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_metadata_author</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_metadata_author">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_metadata_author">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_metadata_author</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.metadata_author">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_author">[docs]</a>
    <span class="n">metadata_author</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_metadata_author</span><span class="p">,</span> <span class="n">_set_metadata_author</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.metadata_author_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.metadata_author_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">metadata_author_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_author</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: PROCESSOR</span>
<div class="viewcode-block" id="ResourceBase._get_processor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_processor">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PROCESSOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_processor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_processor">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PROCESSOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.processor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.processor">[docs]</a>
    <span class="n">processor</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_processor</span><span class="p">,</span> <span class="n">_set_processor</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.processor_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.processor_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">processor_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: PUBLISHER</span>
<div class="viewcode-block" id="ResourceBase._get_publisher">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_publisher">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_publisher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_publisher">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_publisher">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_publisher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PUBLISHER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.publisher">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.publisher">[docs]</a>
    <span class="n">publisher</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_publisher</span><span class="p">,</span> <span class="n">_set_publisher</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.publisher_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.publisher_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">publisher_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">publisher</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: CUSTODIAN</span>
<div class="viewcode-block" id="ResourceBase._get_custodian">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_custodian">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_custodian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">CUSTODIAN</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_custodian">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_custodian">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_custodian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">CUSTODIAN</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.custodian">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.custodian">[docs]</a>
    <span class="n">custodian</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_custodian</span><span class="p">,</span> <span class="n">_set_custodian</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.custodian_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.custodian_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">custodian_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">custodian</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: DISTRIBUTOR</span>
<div class="viewcode-block" id="ResourceBase._get_distributor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_distributor">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_distributor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">DISTRIBUTOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_distributor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_distributor">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_distributor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">DISTRIBUTOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.distributor">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.distributor">[docs]</a>
    <span class="n">distributor</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_distributor</span><span class="p">,</span> <span class="n">_set_distributor</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.distributor_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.distributor_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">distributor_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">distributor</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: RESOURCE_USER</span>
<div class="viewcode-block" id="ResourceBase._get_resource_user">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_resource_user">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_resource_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">RESOURCE_USER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_resource_user">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_resource_user">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_resource_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">RESOURCE_USER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.resource_user">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.resource_user">[docs]</a>
    <span class="n">resource_user</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_resource_user</span><span class="p">,</span> <span class="n">_set_resource_user</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.resource_user_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.resource_user_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">resource_user_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_user</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: RESOURCE_PROVIDER</span>
<div class="viewcode-block" id="ResourceBase._get_resource_provider">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_resource_provider">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_resource_provider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">RESOURCE_PROVIDER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_resource_provider">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_resource_provider">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_resource_provider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">RESOURCE_PROVIDER</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.resource_provider">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.resource_provider">[docs]</a>
    <span class="n">resource_provider</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_resource_provider</span><span class="p">,</span> <span class="n">_set_resource_provider</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.resource_provider_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.resource_provider_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">resource_provider_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_provider</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: ORIGINATOR</span>
<div class="viewcode-block" id="ResourceBase._get_originator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_originator">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_originator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">ORIGINATOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_originator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_originator">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_originator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">ORIGINATOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.originator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.originator">[docs]</a>
    <span class="n">originator</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_originator</span><span class="p">,</span> <span class="n">_set_originator</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.originator_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.originator_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">originator_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">originator</span><span class="p">)</span></div>


    <span class="c1"># Contact Role: PRINCIPAL_INVESTIGATOR</span>
<div class="viewcode-block" id="ResourceBase._get_principal_investigator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._get_principal_investigator">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_principal_investigator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_contact_role_elements__</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PRINCIPAL_INVESTIGATOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase._set_principal_investigator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase._set_principal_investigator">[docs]</a>
    <span class="k">def</span> <span class="nf">_set_principal_investigator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_profile</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set_contact_role_element__</span><span class="p">(</span><span class="n">user_profile</span><span class="o">=</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="n">Roles</span><span class="o">.</span><span class="n">PRINCIPAL_INVESTIGATOR</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.principal_investigator">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.principal_investigator">[docs]</a>
    <span class="n">principal_investigator</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_principal_investigator</span><span class="p">,</span> <span class="n">_set_principal_investigator</span><span class="p">)</span></div>


    <span class="nd">@property</span>
<div class="viewcode-block" id="ResourceBase.principal_investigator_csv">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.principal_investigator_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">principal_investigator_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">()</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">username</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">principal_investigator</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResourceBase.get_linked_resources">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ResourceBase.get_linked_resources">[docs]</a>
    <span class="k">def</span> <span class="nf">get_linked_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_target</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all the linked resources to this ResourceBase instance.</span>
<span class="sd">        This is implemented as a method so that derived classes can override it (for instance, Maps may add</span>
<span class="sd">        related datasets)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">LinkedResource</span><span class="o">.</span><span class="n">get_linked_resources</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">as_target</span>
            <span class="k">else</span> <span class="n">LinkedResource</span><span class="o">.</span><span class="n">get_linked_resources</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="LinkManager">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager">[docs]</a>
<span class="k">class</span> <span class="nc">LinkManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper class to access links grouped by type&quot;&quot;&quot;</span>

<div class="viewcode-block" id="LinkManager.data">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="LinkManager.image">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.image">[docs]</a>
    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="LinkManager.download">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.download">[docs]</a>
    <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type__in</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;original&quot;</span><span class="p">])</span></div>


<div class="viewcode-block" id="LinkManager.metadata">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.metadata">[docs]</a>
    <span class="k">def</span> <span class="nf">metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type</span><span class="o">=</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="LinkManager.original">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.original">[docs]</a>
    <span class="k">def</span> <span class="nf">original</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type</span><span class="o">=</span><span class="s2">&quot;original&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="LinkManager.ows">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkManager.ows">[docs]</a>
    <span class="k">def</span> <span class="nf">ows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">link_type__in</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;OGC:WMS&quot;</span><span class="p">,</span> <span class="s2">&quot;OGC:WFS&quot;</span><span class="p">,</span> <span class="s2">&quot;OGC:WCS&quot;</span><span class="p">])</span></div>
</div>



<div class="viewcode-block" id="LinkedResource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource">[docs]</a>
<span class="k">class</span> <span class="nc">LinkedResource</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="LinkedResource.source">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.source">[docs]</a>
    <span class="n">source</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">ResourceBase</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;linked_to&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="LinkedResource.target">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.target">[docs]</a>
    <span class="n">target</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ResourceBase</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;linked_by&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinkedResource.internal">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.internal">[docs]</a>
    <span class="n">internal</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="LinkedResource.get_linked_resources">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.get_linked_resources">[docs]</a>
    <span class="k">def</span> <span class="nf">get_linked_resources</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">ResourceBase</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">ResourceBase</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_internal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">target</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Both source and target filters missing&quot;</span><span class="p">)</span>

        <span class="n">qs</span> <span class="o">=</span> <span class="n">LinkedResource</span><span class="o">.</span><span class="n">objects</span>
        <span class="k">if</span> <span class="n">source</span><span class="p">:</span>
            <span class="n">qs</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">target</span><span class="p">:</span>
            <span class="n">qs</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_internal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">qs</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">internal</span><span class="o">=</span><span class="n">is_internal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qs</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="LinkedResource.get_target_ids">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.get_target_ids">[docs]</a>
    <span class="k">def</span> <span class="nf">get_target_ids</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">ResourceBase</span><span class="p">,</span> <span class="n">is_internal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">LinkedResource</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&quot;target_id&quot;</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_internal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sub</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">internal</span><span class="o">=</span><span class="n">is_internal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="LinkedResource.get_targets">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.get_targets">[docs]</a>
    <span class="k">def</span> <span class="nf">get_targets</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">ResourceBase</span><span class="p">,</span> <span class="n">is_internal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__in</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_target_ids</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">is_internal</span><span class="p">))</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="LinkedResource.resolve_targets">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.resolve_targets">[docs]</a>
    <span class="k">def</span> <span class="nf">resolve_targets</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">linked_resources</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">target</span> <span class="k">for</span> <span class="n">lr</span> <span class="ow">in</span> <span class="n">linked_resources</span><span class="p">)</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="LinkedResource.resolve_sources">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.LinkedResource.resolve_sources">[docs]</a>
    <span class="k">def</span> <span class="nf">resolve_sources</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">linked_resources</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">source</span> <span class="k">for</span> <span class="n">lr</span> <span class="ow">in</span> <span class="n">linked_resources</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Link">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link">[docs]</a>
<span class="k">class</span> <span class="nc">Link</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Auxiliary model for storing links for resources.</span>

<span class="sd">    This helps avoiding the need for runtime lookups</span>
<span class="sd">    to the OWS server or the CSW Catalogue.</span>

<span class="sd">    There are four types of links:</span>
<span class="sd">     * original: For uploaded files (Shapefiles or GeoTIFFs)</span>
<span class="sd">     * data: For WFS and WCS links that allow access to raw data</span>
<span class="sd">     * image: For WMS and TMS links</span>
<span class="sd">     * metadata: For CSW links</span>
<span class="sd">     * OGC:WMS: for WMS service links</span>
<span class="sd">     * OGC:WFS: for WFS service links</span>
<span class="sd">     * OGC:WCS: for WCS service links</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Link.resource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.resource">[docs]</a>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ResourceBase</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="Link.extension">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.extension">[docs]</a>
    <span class="n">extension</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;For example &quot;kml&quot;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Link.link_type">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.link_type">[docs]</a>
    <span class="n">link_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">enumerations</span><span class="o">.</span><span class="n">LINK_TYPES</span><span class="p">])</span></div>

<div class="viewcode-block" id="Link.name">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.name">[docs]</a>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;For example &quot;View in Google Earth&quot;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Link.mime">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.mime">[docs]</a>
    <span class="n">mime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;For example &quot;text/xml&quot;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Link.url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.url">[docs]</a>
    <span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span></div>


<div class="viewcode-block" id="Link.objects">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.objects">[docs]</a>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">LinkManager</span><span class="p">()</span></div>


<div class="viewcode-block" id="Link.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Link.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">link_type</span><span class="si">}</span><span class="s2"> link&quot;</span></div>
</div>



<div class="viewcode-block" id="MenuPlaceholder">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuPlaceholder">[docs]</a>
<span class="k">class</span> <span class="nc">MenuPlaceholder</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="MenuPlaceholder.name">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuPlaceholder.name">[docs]</a>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="MenuPlaceholder.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuPlaceholder.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Menu">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu">[docs]</a>
<span class="k">class</span> <span class="nc">Menu</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="Menu.title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.title">[docs]</a>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Menu.placeholder">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.placeholder">[docs]</a>
    <span class="n">placeholder</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&quot;MenuPlaceholder&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Menu.order">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.order">[docs]</a>
    <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="Menu.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span></div>


<div class="viewcode-block" id="Menu.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="Menu.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;placeholder&quot;</span><span class="p">,</span> <span class="s2">&quot;order&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;placeholder&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Menu.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Menu.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;order&quot;</span><span class="p">]</span></div>
</div>
</div>



<div class="viewcode-block" id="MenuItem">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem">[docs]</a>
<span class="k">class</span> <span class="nc">MenuItem</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="MenuItem.title">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.title">[docs]</a>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenuItem.menu">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.menu">[docs]</a>
    <span class="n">menu</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&quot;Menu&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenuItem.order">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.order">[docs]</a>
    <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenuItem.blank_target">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.blank_target">[docs]</a>
    <span class="n">blank_target</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span></div>

<div class="viewcode-block" id="MenuItem.url">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.url">[docs]</a>
    <span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="MenuItem.__eq__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__eq__">[docs]</a>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__ne__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__ne__">[docs]</a>
    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__lt__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__lt__">[docs]</a>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__le__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__le__">[docs]</a>
    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__gt__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__gt__">[docs]</a>
    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__ge__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__ge__">[docs]</a>
    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span></div>


<div class="viewcode-block" id="MenuItem.__hash__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__hash__">[docs]</a>
    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span></div>


<div class="viewcode-block" id="MenuItem.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span></div>


<div class="viewcode-block" id="MenuItem.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="MenuItem.Meta.unique_together">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.Meta.unique_together">[docs]</a>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="s2">&quot;order&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="MenuItem.Meta.ordering">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.MenuItem.Meta.ordering">[docs]</a>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;order&quot;</span><span class="p">]</span></div>
</div>
</div>



<div class="viewcode-block" id="Configuration">
<a class="viewcode-back" href="../../../autoapi/geonode/br/tests/index.html#geonode.base.models.Configuration">[docs]</a>
<span class="k">class</span> <span class="nc">Configuration</span><span class="p">(</span><span class="n">SingletonModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A model used for managing the Geonode instance&#39;s global configuration,</span>
<span class="sd">    without a need for reloading the instance.</span>

<span class="sd">    Usage:</span>
<span class="sd">    from geonode.base.models import Configuration</span>
<span class="sd">    config = Configuration.load()</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Configuration.read_only">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Configuration.read_only">[docs]</a>
    <span class="n">read_only</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Configuration.maintenance">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Configuration.maintenance">[docs]</a>
    <span class="n">maintenance</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="Configuration.Meta">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Configuration.Meta">[docs]</a>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<div class="viewcode-block" id="Configuration.Meta.verbose_name_plural">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.Configuration.Meta.verbose_name_plural">[docs]</a>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Configuration&quot;</span></div>
</div>


<div class="viewcode-block" id="Configuration.__str__">
<a class="viewcode-back" href="../../../autoapi/geonode/br/tests/index.html#geonode.base.models.Configuration.__str__">[docs]</a>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Configuration&quot;</span></div>
</div>



<div class="viewcode-block" id="UserGeoLimit">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.UserGeoLimit">[docs]</a>
<span class="k">class</span> <span class="nc">UserGeoLimit</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="UserGeoLimit.user">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.UserGeoLimit.user">[docs]</a>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="UserGeoLimit.resource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.UserGeoLimit.resource">[docs]</a>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ResourceBase</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="UserGeoLimit.wkt">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.UserGeoLimit.wkt">[docs]</a>
    <span class="n">wkt</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_column</span><span class="o">=</span><span class="s2">&quot;wkt&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="GroupGeoLimit">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.GroupGeoLimit">[docs]</a>
<span class="k">class</span> <span class="nc">GroupGeoLimit</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="GroupGeoLimit.group">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.GroupGeoLimit.group">[docs]</a>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">GroupProfile</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupGeoLimit.resource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.GroupGeoLimit.resource">[docs]</a>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ResourceBase</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupGeoLimit.wkt">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.GroupGeoLimit.wkt">[docs]</a>
    <span class="n">wkt</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_column</span><span class="o">=</span><span class="s2">&quot;wkt&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="rating_post_save">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.rating_post_save">[docs]</a>
<span class="k">def</span> <span class="nf">rating_post_save</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to fill the average rating field on OverallRating change.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ResourceBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">object_id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rating</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">rating</span><span class="p">)</span></div>



<span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">rating_post_save</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">OverallRating</span><span class="p">)</span>


<div class="viewcode-block" id="ExtraMetadata">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ExtraMetadata">[docs]</a>
<span class="k">class</span> <span class="nc">ExtraMetadata</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="ExtraMetadata.resource">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ExtraMetadata.resource">[docs]</a>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ResourceBase</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtraMetadata.metadata">
<a class="viewcode-back" href="../../../autoapi/geonode/base/models/index.html#geonode.base.models.ExtraMetadata.metadata">[docs]</a>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kan Territory &amp; IT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>